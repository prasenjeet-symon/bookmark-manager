generator client {
    provider      = "prisma-client-js"
    binaryTargets = ["debian-openssl-1.1.x", "native"]
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model Admin {
    id             Int      @id @default(autoincrement())
    email          String   @unique
    fullName       String
    profilePicture String?
    password       String
    userId         String
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt
}

model User {
    id             Int          @id @default(autoincrement())
    email          String       @unique
    mobile         String?
    fullName       String
    profilePicture String?
    password       String
    userId         String       @unique
    dateOfBirth    DateTime?
    timeZone       String       @default("IST")
    createdAt      DateTime     @default(now())
    updatedAt      DateTime     @updatedAt
    userSetting    UserSetting?
    isDeleted      Boolean      @default(false)
    links          Link[]
    userTabs       UserTab[]
}

enum ColumnNumber {
    THREE
    FOUR
    FIVE
}

model UserSetting {
    id                             Int          @id @default(autoincrement())
    userIdentifier                 String       @unique
    user                           User         @relation(fields: [userIdentifier], references: [userId])
    isDarkMode                     Boolean      @default(true)
    numberOfColumns                ColumnNumber
    showNumberOfBookmarkInTab      Boolean      @default(false)
    showNumberOfBookmarkInCategory Boolean      @default(false)
    showTagsInTooltip              Boolean      @default(false)
    showNoteInTooltip              Boolean      @default(false)
    allowDragDropToMoveLink        Boolean      @default(true)
    createdAt                      DateTime     @default(now())
    updatedAt                      DateTime     @updatedAt
}

model UserTab {
    id             Int        @id @default(autoincrement())
    identifier     String     @unique
    userIdentifier String
    user           User       @relation(fields: [userIdentifier], references: [userId])
    name           String
    order          Int
    categories     Category[]
    createdAt      DateTime   @default(now())
    updatedAt      DateTime   @updatedAt
    isDeleted      Boolean    @default(false)
}

model Category {
    id            Int      @id @default(autoincrement())
    identifier    String   @unique
    name          String
    order         Int
    color         String
    icon          String?
    tabIdentifier String
    tab           UserTab  @relation(fields: [tabIdentifier], references: [identifier])
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt
    links         Link[]
    isDeleted     Boolean  @default(false)
}

model Link {
    id                 Int       @id @default(autoincrement())
    identifier         String    @unique
    title              String
    url                String
    order              Int
    icon               String?
    notes              String?
    linkTags           LinkTag[]
    categoryIdentifier String
    category           Category  @relation(fields: [categoryIdentifier], references: [identifier])
    userIdentifier     String
    user               User      @relation(fields: [userIdentifier], references: [userId])
    createdAt          DateTime  @default(now())
    updatedAt          DateTime  @updatedAt
    isDeleted          Boolean   @default(false)
}

model Tag {
    id         Int       @id @default(autoincrement())
    identifier String    @unique
    name       String    @unique
    order      Int
    linkTags   LinkTag[]
    createdAt  DateTime  @default(now())
    updatedAt  DateTime  @updatedAt
    isDeleted  Boolean   @default(false)
}

model LinkTag {
    id             Int      @id @default(autoincrement())
    linkIdentifier String
    link           Link     @relation(fields: [linkIdentifier], references: [identifier])
    tagIdentifier  String
    tag            Tag      @relation(fields: [tagIdentifier], references: [identifier])
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt
}
