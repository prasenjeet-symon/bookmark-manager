export default function script(url: string) {
  return `javascript:(function(){function extractUrlTitleAndFavicon(){var url=window.location.href;var title=document.title;var favicon=null;var faviconElements=document.querySelectorAll('link[rel="icon"], link[rel="shortcut icon"]');if(faviconElements.length>0){favicon=faviconElements[0].href;}return{url:url,title:title,favicon:favicon}}function convertImageToBase64(url,callback){var img=new Image();img.crossOrigin='Anonymous';img.onload=function(){var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');canvas.height=this.naturalHeight;canvas.width=this.naturalWidth;ctx.drawImage(this,0,0);var dataURL=canvas.toDataURL('image/png');callback(dataURL)};img.src=url}function openPopup(baseUrl,url,title,favicon,width,height){var left=(screen.width-width)/2;var top=(screen.height-height)/3;var popupUrl=baseUrl+"?url="+encodeURIComponent(url)+"&title="+encodeURIComponent(title);if(favicon){convertImageToBase64(favicon,function(base64Favicon){popupUrl+="&favicon="+encodeURIComponent(base64Favicon);var popup=window.open(popupUrl,title,"width="+width+",height="+height+",left="+left+",top="+top)})}else{var popup=window.open(popupUrl,title,"width="+width+",height="+height+",left="+left+",top="+top)}}var extractedData=extractUrlTitleAndFavicon();var url="${url}";var title="Add to Linkify";var width=screen.width*0.5;var height=screen.height*0.6;openPopup(url,extractedData.url,extractedData.title,extractedData.favicon,width,height)})();
  `;
}
